
<div class="page">
  <div class="profile-block container-fluid max-width">
    <div class="row">

      <div class="additional col-md-3">
        <div class="d-flex flex-column">
          <div class="profile-icon">
            <img class="d-block" src="../../../../../assets/images/default-account-img.png">
          </div>

          <div *ngIf="userData" class="additional_user-name additional_item">
            <div class="additional_item-title">{{userData.name}}</div>
          </div>

          <div *ngIf="!isMyAccount && !alreadySubscribed && userData" (click)="addAccountToMySubscriptions()" class="user-subscribe additional_item">
            <div class="additional_item-title">Subscribe</div>
          </div>
          <div *ngIf="!isMyAccount && alreadySubscribed" (click)="deleteAccountFromMySubscriptions()" class="user-unsubscribe additional_item">
            <div class="additional_item-title">Unsubscribe</div>
          </div>

          <div class="reviews additional_item">
            <div class="additional_item-title" *ngIf="reviewsData.length">Reviews: {{reviewsData.length}}</div>
            <div class="additional_item-title" *ngIf="!reviewsData.length">Reviews: 0</div>
          </div>
          <div class="subscriptions additional_item">
            <div class="additional_item-title" (click)="toggle()">Subscriptions: {{subscribtionsData.length}}</div>

            <div *ngIf="toggler && subscribtionsData.length">

              <div *ngFor="let subscribtionData of subscribtionsData" (click)="renderUserAccountPage(subscribtionData)" class="additional_item-content">
                  <div class="user-icon">
                    <img src="https://images.unsplash.com/photo-1456327102063-fb5054efe647?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1050&q=80" alt="">
                  </div>
                  <div class="user-name">{{subscribtionData.name}}</div>
              </div>

            </div>
          </div>

          <div class="profile-about">
            <div class="title">
              About me <!--<i class="fas fa-user-edit edit-icon"></i>-->
            </div>

            <div class="line"></div>
            <div class="line-decoration">
              <div class="line-decoration-inner"></div>
            </div>

            <div *ngIf="userData" class="about-me-info">
              <div *ngIf="userData.location.country" class="location about-me-info-item">
                <i class="fas fa-home"></i> <span>{{userData.location.country}}, {{userData.location.town}}</span>
              </div>
              <div *ngIf="userData.languages.length" class="languages about-me-info-item">
                <i class="fas fa-comments"></i> <span>{{userData.languages}}</span>
              </div>
              <div class="email about-me-info-item">
                <i class="fas fa-envelope"></i> <span>{{userData.email}}</span>
              </div>

              <div class="about-me-description">
                {{userData.about}}
              </div>
            </div>
          </div>
          <div class="features">
            <div class="title">
              Share travel tips
            </div>
            <div class="line"></div>
            <div class="line-decoration">
              <div class="line-decoration-inner"></div>
            </div>
            <div class="write">
              <i class="fas fa-pencil-alt"></i><a>Write a review</a>
            </div>
          </div>
        </div>
      </div>

      <div class="additional col-md-9">
        <div class="subnav">
          <ngb-tabset [destroyOnHide]="false">
            <ngb-tab>
              <ng-template ngbTabTitle>Travel map</ng-template>
              <ng-template ngbTabContent>
                <div *ngIf="orderedToursData.length" class="journal tabset-item tabset-item-map">
                  <div class="user-map-container">
                    <div class="user-map-title">My travel map</div>
                  </div>
                  <div  class="user-map">

                    <div *ngFor="let tourLeft of orderedToursLeft" class="items-left">
                      <div class="item-left container-fluid">
                        <div class="row">
                          <div class="item-info col-10">
                            <div class="container-fluid info-container-fl">
                              <div class="row">
                                <div class="item-info-text col-lg-6">
                                  <div class="trip-name">{{tourLeft.title}}</div>
                                  <div class="trip-date">12/12/2020</div>
                                </div>

                                <div class="item-info-image col-lg-6">
                                  <div class="info-image">
                                    <img [src]="tourLeft.images[0]" alt="">
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>

                          <div class="branch-container col-2">
                            <div class="branch"></div>
                          </div>
                        </div>
                      </div>

                    </div>

                    <div *ngIf="!orderedToursLeft.length" class="items-left"></div>
                    <div class="line-path"></div>

                    <div class="items-right">

                      <div *ngFor="let tourRight of orderedToursRight" class="item-right container-fluid">
                        <div class="row">
                          <div class="branch-container col-2">
                            <div class="branch"></div>
                          </div>
                          <div class="item-info col-10">
                            <div class="container-fluid info-container-fl">
                              <div class="row">
                                <div class="item-info-image col-lg-6 col-12">
                                  <div class="info-image">
                                    <img  [src]="tourRight.images[0]">
                                  </div>
                                </div>

                                <div class="item-info-text col-lg-6 col-12">
                                  <div class="trip-name">{{tourRight.title}}</div>
                                  <div class="trip-date">12/12/2020</div>
                                </div>

                              </div>
                            </div>

                          </div>
                        </div>
                      </div>

                    </div>

                  </div>

                  <div class="continue">...</div>
                </div>

                <div class="no-tours" *ngIf="!ordersData.length && isMyAccount">
                  <div class="have-no-trips">
                    <div class="have-no-trips-picture">
                      <img src="../../assets/images/cat-simon.gif" alt="">
                    </div>
                    <div class="have-no-trips-text">
                      <div class="text-title">Ooops...</div>
                      <div class="text-info">
                        You have not traveled with us yet. <br>
                        View <a>our tours</a> and create your own map of adventures.
                      </div>
                    </div>
                  </div>
                </div>

                <div class="no-orders" *ngIf="!ordersData.length">
                  No ordered tours yet
                </div>
              </ng-template>
            </ngb-tab>

            <ng-container *ngIf="isMyAccount">
            <ngb-tab>
              <ng-template ngbTabTitle>Orders</ng-template>
              <ng-template ngbTabContent>
                <div *ngIf="ordersData.length" class="tabset-item tabset-item-orders">
                  <div class="order-items">

                    <div *ngFor="let tour of orderedToursData; let i = index;" class="order-item container-fluid">
                      <div class="row row-order-item">
                        <div class="order-item-image col-md-5">
                          <div class="img-container">
                            <img [src]="tour.images[0]" alt="">
                          </div>
                        </div>
                        <div class="info col-md-7">
                          <div class="order-item-bar">
                            <i class="fas fa-ellipsis-v"></i>
                          </div>
                          <div class="title">{{tour.title}}</div>
                          <div class="number">Number: {{tour._id}}</div>
                          <div class="price">Price: ${{ordersData[i].cost}}</div>
                          <div class="date">Date: {{ordersData[i].date.day | number: '2.0'}}/{{ordersData[i].date.month | number: '2.0'}}/{{ordersData[i].date.year}}</div>
                        </div>
                      </div>
                    </div>

                  </div>
                </div>

                <div class="no-orders" *ngIf="!ordersData.length">
                  No ordered tours yet
                </div>
              </ng-template>
            </ngb-tab>
            </ng-container>

            <ngb-tab>
              <ng-template ngbTabTitle>Favourites</ng-template>
              <ng-template ngbTabContent>
<!--                <div class="tabset-item">
                  <app-tours-section></app-tours-section>
                </div>-->

                <div class="no-favourites">
                  No favourites tours
                </div>
              </ng-template>
            </ngb-tab>

          </ngb-tabset>
        </div>
      </div>

    </div>
  </div>
</div>
